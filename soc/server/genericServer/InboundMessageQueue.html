<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>InboundMessageQueue (JSettlers 3.0.4 API)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="InboundMessageQueue (JSettlers 3.0.4 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?soc/server/genericServer/InboundMessageQueue.html" target="_top">Frames</a></li>
<li><a href="InboundMessageQueue.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">soc.server.genericServer</div>
<h2 title="Class InboundMessageQueue" class="title">Class InboundMessageQueue</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>soc.server.genericServer.InboundMessageQueue</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">InboundMessageQueue</span>
extends java.lang.Object</pre>
<div class="block">The single Inbound Message Queue for all messages coming from clients.
 Stores all unparsed inbound <a href="../../../soc/message/SOCMessage.html" title="class in soc.message"><code>SOCMessage</code></a>s received from the server from all
 connected clients' <a href="../../../soc/communication/Connection.html" title="class in soc.communication"><code>Connection</code></a> threads through <a href="../../../soc/server/genericServer/InboundMessageQueue.html#push-soc.message.SOCMessage-soc.communication.Connection-"><code>push(SOCMessage, Connection)</code></a>,
 then dispatched to the <a href="../../../soc/server/genericServer/Server.html" title="class in soc.server.genericServer"><code>Server</code></a> for parsing and processing.
<P>
 That dispatch is done through this class's single internal <a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><code>InboundMessageQueue.Treater</code></a> thread, which de-queues
 the received messages from the queue and forwards them to the <a href="../../../soc/server/genericServer/Server.html" title="class in soc.server.genericServer"><code>Server</code></a> by calling
 <a href="../../../soc/communication/SOCMessageDispatcher.html#dispatch-soc.message.SOCMessage-soc.communication.Connection-"><code>SOCMessageDispatcher.dispatch(SOCMessage, Connection)</code></a>
 for each inbound message.
<P>
 Some dispatched message handlers may want to do work in other Threads without tying up the Treater thread,
 but then finish handling that message in the Treater to simplify locking of other objects.
 For this, call <a href="../../../soc/server/genericServer/InboundMessageQueue.html#post-java.lang.Runnable-"><code>post(Runnable)</code></a>: Same concept as <code>EventQueue.invokeLater(Runnable)</code>.

<H3>Startup:</H3>
 This queue's constructor only sets up the InboundMessageQueue to receive messages. Afterwards when the
 <a href="../../../soc/server/genericServer/Server.html" title="class in soc.server.genericServer"><code>Server</code></a> is ready to process inbound messages, you must call <a href="../../../soc/server/genericServer/InboundMessageQueue.html#startMessageProcessing--"><code>startMessageProcessing()</code></a>
 to start this queue's thread to forward messages into the dispatcher.

<H3>Shutdown:</H3>
 At server shutdown time, <code>InboundMessageQueue</code> can be stopped by calling <a href="../../../soc/server/genericServer/InboundMessageQueue.html#stopMessageProcessing--"><code>stopMessageProcessing()</code></a>
 which will stop its <a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><code>InboundMessageQueue.Treater</code></a> thread.

<H3>More Information:</H3>
<UL>
 <LI> See <a href="../../../soc/server/genericServer/Server.html" title="class in soc.server.genericServer"><code>Server</code></a> class javadoc for an overall picture of inbound processing.
 <LI> See <a href="../../../soc/message/SOCMessage.html" title="class in soc.message"><code>SOCMessage</code></a> for details of the client/server protocol messaging.
 <LI> See <a href="../../../soc/communication/Connection.html" title="class in soc.communication"><code>Connection</code></a> for details of the client/server communication.
 <LI> See <a href="../../../soc/communication/SOCMessageDispatcher.html#dispatch-soc.message.SOCMessage-soc.communication.Connection-"><code>SOCMessageDispatcher.dispatch(SOCMessage, Connection)</code></a>
      for details on further message processing.
</UL></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.0.00</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Alessandro D'Ottavio</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer">InboundMessageQueue.Treater</a></span></code>
<div class="block"><a href="../../../soc/server/genericServer/InboundMessageQueue.html" title="class in soc.server.genericServer"><code>InboundMessageQueue</code></a>'s internal single-threaded reader to de-queue each message
 stored in the <a href="../../../soc/server/genericServer/InboundMessageQueue.html#inQueue"><code>inQueue</code></a> and send it to the server dispatcher.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../soc/server/genericServer/InboundMessageQueue.html#InboundMessageQueue-soc.communication.SOCMessageDispatcher-">InboundMessageQueue</a></span>(<a href="../../../soc/communication/SOCMessageDispatcher.html" title="interface in soc.communication">SOCMessageDispatcher</a>&nbsp;imd)</code>
<div class="block">Create a new InboundMessageQueue.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../soc/server/genericServer/InboundMessageQueue.html#isCurrentThreadTreater--">isCurrentThreadTreater</a></span>()</code>
<div class="block">Is our Treater the currently executing thread?</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../soc/server/genericServer/InboundMessageQueue.html#post-java.lang.Runnable-">post</a></span>(java.lang.Runnable&nbsp;run)</code>
<div class="block">Post some Runnable code to be queued and then run on the Treater thread.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../soc/server/genericServer/InboundMessageQueue.html#push-soc.message.SOCMessage-soc.communication.Connection-">push</a></span>(<a href="../../../soc/message/SOCMessage.html" title="class in soc.message">SOCMessage</a>&nbsp;receivedMessage,
    <a href="../../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;clientConnection)</code>
<div class="block">Append an element to the end of the inbound queue.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../soc/server/genericServer/InboundMessageQueue.html#startMessageProcessing--">startMessageProcessing</a></span>()</code>
<div class="block">Start the <a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><code>InboundMessageQueue.Treater</code></a> internal thread that calls the server when new messages arrive.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../soc/server/genericServer/InboundMessageQueue.html#stopMessageProcessing--">stopMessageProcessing</a></span>()</code>
<div class="block">Stop the <a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><code>InboundMessageQueue.Treater</code></a> internal thread</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="InboundMessageQueue-soc.communication.SOCMessageDispatcher-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>InboundMessageQueue</h4>
<pre>public&nbsp;InboundMessageQueue(<a href="../../../soc/communication/SOCMessageDispatcher.html" title="interface in soc.communication">SOCMessageDispatcher</a>&nbsp;imd)</pre>
<div class="block">Create a new InboundMessageQueue. Afterwards when the server is ready
 to receive messages, you must call <a href="../../../soc/server/genericServer/InboundMessageQueue.html#startMessageProcessing--"><code>startMessageProcessing()</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>imd</code> - Message dispatcher at the server which will receive messages from this queue</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="startMessageProcessing--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startMessageProcessing</h4>
<pre>public&nbsp;void&nbsp;startMessageProcessing()</pre>
<div class="block">Start the <a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><code>InboundMessageQueue.Treater</code></a> internal thread that calls the server when new messages arrive.</div>
</li>
</ul>
<a name="stopMessageProcessing--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stopMessageProcessing</h4>
<pre>public&nbsp;void&nbsp;stopMessageProcessing()</pre>
<div class="block">Stop the <a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><code>InboundMessageQueue.Treater</code></a> internal thread</div>
</li>
</ul>
<a name="push-soc.message.SOCMessage-soc.communication.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>push</h4>
<pre>public&nbsp;void&nbsp;push(<a href="../../../soc/message/SOCMessage.html" title="class in soc.message">SOCMessage</a>&nbsp;receivedMessage,
                 <a href="../../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;clientConnection)</pre>
<div class="block">Append an element to the end of the inbound queue.
<P>
<B>Threads:</B>
 This method notifies the <a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><code>InboundMessageQueue.Treater</code></a>, waking that thread if it
 was <code>Object.wait()</code>ing because the queue was empty.
 Although <code>push(..)</code> isn't declared <code>synchronized</code>,
 it's thread-safe because it synchronizes on the internal queue object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>receivedMessage</code> - from the connection; will never be <code>null</code></dd>
<dd><code>clientConnection</code> - that send the message; will never be <code>null</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../soc/server/genericServer/InboundMessageQueue.html#post-java.lang.Runnable-"><code>post(Runnable)</code></a></dd>
</dl>
</li>
</ul>
<a name="post-java.lang.Runnable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>post</h4>
<pre>public&nbsp;void&nbsp;post(java.lang.Runnable&nbsp;run)</pre>
<div class="block">Post some Runnable code to be queued and then run on the Treater thread.
<P>
<B>Threads:</B>
 This method notifies the <a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><code>InboundMessageQueue.Treater</code></a>, waking that thread if it
 was <code>Object.wait()</code>ing because the queue was empty.
 Although <code>post(..)</code> isn't declared <code>synchronized</code>,
 it's thread-safe because it synchronizes on the internal queue object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>run</code> - Runnable code</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.2.00</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../soc/server/genericServer/InboundMessageQueue.html#push-soc.message.SOCMessage-soc.communication.Connection-"><code>push(SOCMessage, Connection)</code></a>, 
<a href="../../../soc/server/genericServer/InboundMessageQueue.html#isCurrentThreadTreater--"><code>isCurrentThreadTreater()</code></a></dd>
</dl>
</li>
</ul>
<a name="isCurrentThreadTreater--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isCurrentThreadTreater</h4>
<pre>public final&nbsp;boolean&nbsp;isCurrentThreadTreater()</pre>
<div class="block">Is our Treater the currently executing thread?
 If not, you can use <a href="../../../soc/server/genericServer/InboundMessageQueue.html#post-java.lang.Runnable-"><code>post(Runnable)</code></a> to do work on that thread.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if <code>Thread.currentThread()</code> is this queue's Treater</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.2.00</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../soc/server/genericServer/InboundMessageQueue.Treater.html" title="class in soc.server.genericServer"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?soc/server/genericServer/InboundMessageQueue.html" target="_top">Frames</a></li>
<li><a href="InboundMessageQueue.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
