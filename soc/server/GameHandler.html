<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>GameHandler (JSettlers 3.0.3 API)</title>
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GameHandler (JSettlers 3.0.3 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6,"i11":6,"i12":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../soc/server/GameMessageHandler.html" title="interface in soc.server"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?soc/server/GameHandler.html" target="_top">Frames</a></li>
<li><a href="GameHandler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">soc.server</div>
<h2 title="Class GameHandler" class="title">Class GameHandler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>soc.server.GameHandler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../soc/server/SOCGameHandler.html" title="class in soc.server">SOCGameHandler</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">GameHandler</span>
extends java.lang.Object</pre>
<div class="block">Server class to handle game-specific actions for a type of game and send resulting messages to clients.
 Each game type's inbound messages are processed through its <a href="../../soc/server/GameMessageHandler.html" title="interface in soc.server"><code>GameMessageHandler</code></a>.
<P>
 Currently, these concepts are common to all hosted game types:
<UL>
 <LI> A game has members (clients) who are each a player or observer
 <LI> Some players may be bots
 <LI> Human players sit down (choosing a player number) before starting the game
 <LI> Some player positions (seats) may be locked so a bot won't sit there
 <LI> Once a human player decides to start the game, randomly chosen bots join and sit down in unlocked empty seats
 <LI> Games can be new, starting, active, or over
 <LI> Once started, games have a current player
 <LI> If bots' turns or actions take too long, can force the end of their turn
 <LI> Game board can be reset to a new game with the same settings and players (bots, if any, are randomly chosen again).
      See <a href="../../soc/game/SOCGame.html#resetAsCopy--"><code>SOCGame.resetAsCopy()</code></a> and <a href="../../soc/server/SOCGameListAtServer.html#resetBoard-java.lang.String-"><code>SOCGameListAtServer.resetBoard(String)</code></a>.
</UL>

 Interface and interaction:
<UL>
 <LI> The <a href="../../soc/server/SOCServer.html" title="class in soc.server"><code>SOCServer</code></a> manages the "boundary" of the game: The list of all games;
      joining and leaving players and bots; creating and destroying games; game start time and the board reset framework.
 <LI> Every server/client interaction about the game, including startup and end-game details, player actions and
      requests, and ending a player's turn, is taken care of within the <code>GameHandler</code> and <a href="../../soc/game/SOCGame.html" title="class in soc.game"><code>SOCGame</code></a>.
      Game reset details are handled by <a href="../../soc/game/SOCGame.html#resetAsCopy--"><code>SOCGame.resetAsCopy()</code></a>.
 <LI> Actions and requests from players arrive here via
      <a href="../../soc/server/GameMessageHandler.html#dispatch-soc.game.SOCGame-soc.message.SOCMessageForGame-soc.communication.Connection-"><code>GameMessageHandler.dispatch(SOCGame, SOCMessageForGame, Connection)</code></a>,
      called for each <a href="../../soc/message/SOCMessageForGame.html" title="interface in soc.message"><code>SOCMessageForGame</code></a> sent to the server about this handler's game.
 <LI> Communication to game members is done by handler methods calling server methods
      such as <a href="../../soc/server/SOCServer.html#messageToGame-java.lang.String-boolean-soc.message.SOCMessage-"><code>SOCServer.messageToGame(String, boolean, soc.message.SOCMessage)</code></a>
      or <a href="../../soc/server/SOCServer.html#messageToPlayer-soc.communication.Connection-java.lang.String-int-soc.message.SOCMessage-"><code>SOCServer.messageToPlayer(Connection, String, int, soc.message.SOCMessage)</code></a>.
</UL></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.0.00</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Jeremy D Monin &lt;jeremy@nand.net&gt;</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../soc/server/SOCServer.html" title="class in soc.server">SOCServer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#srv">srv</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#GameHandler-soc.server.SOCServer-">GameHandler</a></span>(<a href="../../soc/server/SOCServer.html" title="class in soc.server">SOCServer</a>&nbsp;server)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#calcGameClientFeaturesRequired-soc.game.SOCGame-">calcGameClientFeaturesRequired</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga)</code>
<div class="block">When creating a new game at the server, check its options and
 if any of them require any optional client features, calculate
 the required features and call <a href="../../soc/game/SOCGame.html#setClientFeaturesRequired-soc.util.SOCFeatureSet-"><code>SOCGame.setClientFeaturesRequired(soc.util.SOCFeatureSet)</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#endGameTurnOrForce-soc.game.SOCGame-int-java.lang.String-soc.communication.Connection-boolean-">endGameTurnOrForce</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                  int&nbsp;plNumber,
                  java.lang.String&nbsp;plName,
                  <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;plConn,
                  boolean&nbsp;hasMonitorFromGameList)</code>
<div class="block">A bot is unresponsive, or a human player has left the game.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#endTurnIfInactive-soc.game.SOCGame-long-">endTurnIfInactive</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                 long&nbsp;currentTimeMillis)</code>
<div class="block">The server's timer thread thinks this game is inactive because of a robot bug.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#findRobotAskJoinGame-soc.game.SOCGame-java.lang.Object-boolean-">findRobotAskJoinGame</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                    java.lang.Object&nbsp;reqInfo,
                    boolean&nbsp;gameIsActive)</code>
<div class="block">When a human player has left an active game, or a game is starting and a
 bot from that game's <a href="../../soc/server/SOCServer.html#robotJoinRequests"><code>SOCServer.robotJoinRequests</code></a> has disconnected,
 look for a robot player which can take a seat and continue the game.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>abstract java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#getDebugCommandsHelp--">getDebugCommandsHelp</a></span>()</code>
<div class="block">Get the debug commands for this game type, if any, used with
 <a href="../../soc/server/GameHandler.html#processDebugCommand-soc.communication.Connection-soc.game.SOCGame-java.lang.String-java.lang.String-"><code>processDebugCommand(Connection, SOCGame, String, String)</code></a>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>abstract <a href="../../soc/server/GameMessageHandler.html" title="interface in soc.server">GameMessageHandler</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#getMessageHandler--">getMessageHandler</a></span>()</code>
<div class="block">Get this game type's GameMessageHandler.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#joinGame-soc.game.SOCGame-soc.communication.Connection-boolean-boolean-boolean-">joinGame</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;gameData,
        <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;c,
        boolean&nbsp;isReset,
        boolean&nbsp;isLoading,
        boolean&nbsp;isRejoinOrLoadgame)</code>
<div class="block">Client has been approved to join game; send JOINGAMEAUTH and the entire state of the game to client.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#leaveGame-soc.game.SOCGame-soc.communication.Connection-boolean-boolean-">leaveGame</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
         <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;c,
         boolean&nbsp;hasReplacement,
         boolean&nbsp;hasHumanReplacement)</code>
<div class="block">This member (player or observer) has left the game.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>abstract boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#processDebugCommand-soc.communication.Connection-soc.game.SOCGame-java.lang.String-java.lang.String-">processDebugCommand</a></span>(<a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;debugCli,
                   <a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                   java.lang.String&nbsp;dcmd,
                   java.lang.String&nbsp;dcmdU)</code>
<div class="block">Look for a potential debug command in a text message sent by the "debug" client/player.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#sendGameState-soc.game.SOCGame-">sendGameState</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga)</code>
<div class="block">Send all game members the current state of the game with a <a href="../../soc/message/SOCGameState.html" title="class in soc.message"><code>SOCGameState</code></a> message.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#sendTradeOffer-soc.game.SOCPlayer-soc.communication.Connection-">sendTradeOffer</a></span>(<a href="../../soc/game/SOCPlayer.html" title="class in soc.game">SOCPlayer</a>&nbsp;pl,
              <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;toJoiningClient)</code>
<div class="block">Announces this player's new trade offer to their game,
 or send that info to one client that's joining the game now.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#sitDown_sendPrivateInfo-soc.game.SOCGame-soc.communication.Connection-int-boolean-">sitDown_sendPrivateInfo</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                       <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;c,
                       int&nbsp;pn,
                       boolean&nbsp;isRejoinOrLoadgame)</code>
<div class="block">When player has just sat down at a seat, send them all the private information.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../soc/server/GameHandler.html#startGame-soc.game.SOCGame-">startGame</a></span>(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga)</code>
<div class="block">Do the things you need to do to start a game and send its data to the clients.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="srv">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>srv</h4>
<pre>protected final&nbsp;<a href="../../soc/server/SOCServer.html" title="class in soc.server">SOCServer</a> srv</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="GameHandler-soc.server.SOCServer-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GameHandler</h4>
<pre>protected&nbsp;GameHandler(<a href="../../soc/server/SOCServer.html" title="class in soc.server">SOCServer</a>&nbsp;server)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getMessageHandler--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMessageHandler</h4>
<pre>public abstract&nbsp;<a href="../../soc/server/GameMessageHandler.html" title="interface in soc.server">GameMessageHandler</a>&nbsp;getMessageHandler()</pre>
<div class="block">Get this game type's GameMessageHandler.</div>
</li>
</ul>
<a name="processDebugCommand-soc.communication.Connection-soc.game.SOCGame-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processDebugCommand</h4>
<pre>public abstract&nbsp;boolean&nbsp;processDebugCommand(<a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;debugCli,
                                            <a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                                            java.lang.String&nbsp;dcmd,
                                            java.lang.String&nbsp;dcmdU)</pre>
<div class="block">Look for a potential debug command in a text message sent by the "debug" client/player.
 If game debug is on, called for every game text message (chat message) received from that player.
<P>
 Server-wide debug commands are processed before gametype-specific debug commands;
 see <a href="../../soc/server/SOCServer.html#processDebugCommand-soc.communication.Connection-soc.game.SOCGame-java.lang.String-java.lang.String-"><code>SOCServer.processDebugCommand(Connection, SOCGame, String, String)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>debugCli</code> - Client sending the potential debug command</dd>
<dd><code>ga</code> - Game in which the message is sent; not null</dd>
<dd><code>dcmd</code> - Text message which may be a debug command</dd>
<dd><code>dcmdU</code> - <code>dcmd</code> as uppercase, for efficiency (it's already been uppercased in caller)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if <code>dcmd</code> is a recognized debug command, false otherwise</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../soc/server/GameHandler.html#getDebugCommandsHelp--"><code>getDebugCommandsHelp()</code></a></dd>
</dl>
</li>
</ul>
<a name="getDebugCommandsHelp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDebugCommandsHelp</h4>
<pre>public abstract&nbsp;java.lang.String[]&nbsp;getDebugCommandsHelp()</pre>
<div class="block">Get the debug commands for this game type, if any, used with
 <a href="../../soc/server/GameHandler.html#processDebugCommand-soc.communication.Connection-soc.game.SOCGame-java.lang.String-java.lang.String-"><code>processDebugCommand(Connection, SOCGame, String, String)</code></a>.
 If client types the <code>*help*</code> debug command, the server will
 send them all the general debug command help, and these strings.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a set of lines of help text to send to a client after sending <a href="../../soc/server/SOCServer.html#DEBUG_COMMANDS_HELP"><code>SOCServer.DEBUG_COMMANDS_HELP</code></a>,
          or <code>null</code> if no gametype-specific debug commands</dd>
</dl>
</li>
</ul>
<a name="calcGameClientFeaturesRequired-soc.game.SOCGame-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calcGameClientFeaturesRequired</h4>
<pre>public abstract&nbsp;void&nbsp;calcGameClientFeaturesRequired(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga)</pre>
<div class="block">When creating a new game at the server, check its options and
 if any of them require any optional client features, calculate
 the required features and call <a href="../../soc/game/SOCGame.html#setClientFeaturesRequired-soc.util.SOCFeatureSet-"><code>SOCGame.setClientFeaturesRequired(soc.util.SOCFeatureSet)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ga</code> - Game to check features; not <code>null</code></dd>
</dl>
</li>
</ul>
<a name="joinGame-soc.game.SOCGame-soc.communication.Connection-boolean-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinGame</h4>
<pre>public abstract&nbsp;void&nbsp;joinGame(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;gameData,
                              <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;c,
                              boolean&nbsp;isReset,
                              boolean&nbsp;isLoading,
                              boolean&nbsp;isRejoinOrLoadgame)</pre>
<div class="block">Client has been approved to join game; send JOINGAMEAUTH and the entire state of the game to client.
 Unless <code>isRejoinOrLoadgame</code>, announce <code>SOCJoinGame</code> client join event to other players.
<P>
 Assumes <a href="../../soc/server/SOCServer.html#connectToGame-soc.communication.Connection-java.lang.String-soc.game.SOCGameOptionSet-soc.game.SOCGame-"><code>SOCServer.connectToGame(Connection, String, SOCGameOptionSet, SOCGame)</code></a> was already called.
 Assumes NEWGAME (or NEWGAMEWITHOPTIONS) has already been sent out.
 First message sent to connecting client is JOINGAMEAUTH, unless isReset.
<P>
 Among other messages, player names are sent via SITDOWN, and pieces on board
 sent by PUTPIECE. See comments here for further details. The group of messages
 sent here to the client ends with GAMEMEMBERS, SETTURN and GAMESTATE.
 If game has started (state &gt;= <a href="../../soc/game/GameState.html#START2A"><code>START2A</code></a>), they're
 then prompted with a GAMESERVERTEXT to take over a bot in order to play.
<P>
 If <code>isRejoinOrLoadgame</code>, assume the game already started and also include any details
 about pieces, number of items, cards in hand, etc.
<P></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gameData</code> - Game to join</dd>
<dd><code>c</code> - The connection of joining client</dd>
<dd><code>isReset</code> - Game is a board-reset of an existing game.  This is always false when
                 called from SOCServer instead of from inside the GameHandler.
                 Not all game types may be reset.</dd>
<dd><code>isLoading</code> - Game is being reloaded from snapshot by <code>c</code>'s request; state is <a href="../../soc/game/GameState.html#LOADING"><code>GameState.LOADING</code></a></dd>
<dd><code>isRejoinOrLoadgame</code> - If true, client is re-joining; <code>c</code> replaces an earlier connection which
          is defunct/frozen because of a network problem. Also true when a human player joins a
          game being reloaded and has the same nickname as a player there.
          If <code>isRejoinOrLoadgame</code>, sends <code>c</code> their hand's private info for game in progress.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1.00</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../soc/server/SOCServer.html#createOrJoinGameIfUserOK-soc.communication.Connection-java.lang.String-java.lang.String-java.lang.String-soc.game.SOCGameOptionSet-"><code>SOCServer.createOrJoinGameIfUserOK(Connection, String, String, String, SOCGameOptionSet)</code></a></dd>
</dl>
</li>
</ul>
<a name="sitDown_sendPrivateInfo-soc.game.SOCGame-soc.communication.Connection-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sitDown_sendPrivateInfo</h4>
<pre>public abstract&nbsp;void&nbsp;sitDown_sendPrivateInfo(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                                             <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;c,
                                             int&nbsp;pn,
                                             boolean&nbsp;isRejoinOrLoadgame)</pre>
<div class="block">When player has just sat down at a seat, send them all the private information.
 Cards in their hand, resource counts, anything else that isn't public to all players.
 Because they've just sat and become an active player, send the gameState, and prompt them if
 the game is waiting on any decision by their player number (discard, pick a free resource, etc).
<P>
 Called from <a href="../../soc/server/SOCServer.html#sitDown-soc.game.SOCGame-soc.communication.Connection-int-boolean-boolean-"><code>SOCServer.sitDown(SOCGame, Connection, int, boolean, boolean)</code></a>.
<P>
 <b>Locks:</b> Assumes ga.takeMonitor() is held, and should remain held.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ga</code> - the game</dd>
<dd><code>c</code> - the connection for the player</dd>
<dd><code>pn</code> - which seat the player is taking</dd>
<dd><code>isRejoinOrLoadgame</code> - If true, client is re-joining; <code>c</code> replaces an earlier connection which
          is defunct/frozen because of a network problem. Also true when a human player joins a
          game being reloaded and has the same nickname as a player there.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.1.08</dd>
</dl>
</li>
</ul>
<a name="sendGameState-soc.game.SOCGame-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendGameState</h4>
<pre>public abstract&nbsp;void&nbsp;sendGameState(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga)</pre>
<div class="block">Send all game members the current state of the game with a <a href="../../soc/message/SOCGameState.html" title="class in soc.message"><code>SOCGameState</code></a> message.
 Assumes current player does not change during this state.
 May also send other messages to the current player.
 If state is <a href="../../soc/game/GameState.html#ROLL_OR_CARD"><code>GameState.ROLL_OR_CARD</code></a>, sends game a <a href="../../soc/message/SOCRollDicePrompt.html" title="class in soc.message"><code>SOCRollDicePrompt</code></a>.
<P>
 Be sure that callers to <code>sendGameState</code> don't assume the game will still
 exist after calling this method, if the game state was <a href="../../soc/game/GameState.html#GAME_OVER"><code>GameState.GAME_OVER</code></a>.
<P>
 This method has always been part of the server package.
 v2.3.00 is the first version to expose it as part of <code>GameHandler</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ga</code> - the game</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.3.00</dd>
</dl>
</li>
</ul>
<a name="startGame-soc.game.SOCGame-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startGame</h4>
<pre>public abstract&nbsp;void&nbsp;startGame(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga)</pre>
<div class="block">Do the things you need to do to start a game and send its data to the clients.
 Players are already seated when this method is called.
<P>
 Send all game members the piece counts, other public information for the game and each player,
 set up and send the board layout, game state, and finally send the <a href="../../soc/message/SOCStartGame.html" title="class in soc.message"><code>STARTGAME</code></a>
 and <a href="../../soc/message/SOCTurn.html" title="class in soc.message"><code>TURN</code></a> messages.
<P>
 Set game state to <a href="../../soc/game/GameState.html#READY"><code>GameState.READY</code></a> or higher, from an earlier/lower state.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ga</code> - the game</dd>
</dl>
</li>
</ul>
<a name="sendTradeOffer-soc.game.SOCPlayer-soc.communication.Connection-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendTradeOffer</h4>
<pre>public abstract&nbsp;void&nbsp;sendTradeOffer(<a href="../../soc/game/SOCPlayer.html" title="class in soc.game">SOCPlayer</a>&nbsp;pl,
                                    <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;toJoiningClient)</pre>
<div class="block">Announces this player's new trade offer to their game,
 or send that info to one client that's joining the game now.
 If player isn't currently offering, does nothing.
<P>
 If announcing to entire game (not <code>toJoiningClient</code>),
 treats this as a new offer and calls <a href="../../soc/server/SOCServer.html#recordGameEvent-java.lang.String-soc.message.SOCMessage-"><code>SOCServer.recordGameEvent(String, soc.message.SOCMessage)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pl</code> - Send this player's <a href="../../soc/game/SOCPlayer.html#getCurrentOffer--"><code>SOCPlayer.getCurrentOffer()</code></a>, if any</dd>
<dd><code>toJoiningClient</code> - Null or a single client to send offer info to</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.4.00</dd>
</dl>
</li>
</ul>
<a name="endTurnIfInactive-soc.game.SOCGame-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endTurnIfInactive</h4>
<pre>public abstract&nbsp;void&nbsp;endTurnIfInactive(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                                       long&nbsp;currentTimeMillis)</pre>
<div class="block">The server's timer thread thinks this game is inactive because of a robot bug.
 Check the game.  If this is the case, end the current turn, forcing if necessary.
 Use a separate thread so the main timer thread isn't tied up; see <a href="../../soc/server/SOCForceEndTurnThread.html" title="class in soc.server"><code>SOCForceEndTurnThread</code></a>.
<P>
 The server checks <a href="../../soc/game/SOCGame.html#lastActionTime"><code>SOCGame.lastActionTime</code></a> to decide inaction.
 The game could also seem inactive if we're waiting for another human player to decide something.
 Games with state &gt;= <a href="../../soc/game/GameState.html#GAME_OVER"><code>GameState.GAME_OVER</code></a>, and games which haven't started yet
 (<a href="../../soc/game/SOCGame.html#getCurrentPlayerNumber--"><code>SOCGame.getCurrentPlayerNumber()</code></a> == -1), are ignored.
<P>
 The default timeout is <a href="../../soc/server/SOCServer.html#ROBOT_FORCE_ENDTURN_SECONDS"><code>SOCServer.ROBOT_FORCE_ENDTURN_SECONDS</code></a>.  You may calculate and use
 a longer timeout if it makes sense in the current conditions, such as waiting for a human player
 to ignore or respond to a trade offer.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ga</code> - Game to check</dd>
<dd><code>currentTimeMillis</code> - The time when called, from <code>System.currentTimeMillis()</code></dd>
</dl>
</li>
</ul>
<a name="endGameTurnOrForce-soc.game.SOCGame-int-java.lang.String-soc.communication.Connection-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endGameTurnOrForce</h4>
<pre>public abstract&nbsp;boolean&nbsp;endGameTurnOrForce(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                                           int&nbsp;plNumber,
                                           java.lang.String&nbsp;plName,
                                           <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;plConn,
                                           boolean&nbsp;hasMonitorFromGameList)</pre>
<div class="block">A bot is unresponsive, or a human player has left the game.
 End this player's turn cleanly, or force-end if needed.
<P>
 Can be called for a player still in the game, or for a player
 who has left (<a href="../../soc/game/SOCGame.html#removePlayer-java.lang.String-boolean-"><code>SOCGame.removePlayer(String, boolean)</code></a> has been called).
 Can be called for a player who isn't current player; in that case
 it takes action if the game was waiting for the player (picking random
 resources for discard or gold-hex picks) but won't end the current turn.
<P>
 If they were placing an initial road, also cancels that road's
 initial settlement.
<P>
 <b>Locks:</b> Must not have ga.takeMonitor() when calling this method.
 May or may not have <tt>gameList.takeMonitorForGame(ga)</tt>;
 use <tt>hasMonitorFromGameList</tt> to indicate.
<P>
 Before v2.4.50, this method was only in <a href="../../soc/server/SOCGameHandler.html" title="class in soc.server"><code>SOCGameHandler</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ga</code> - The game to end turn if called for current player, or to otherwise stop waiting for a player</dd>
<dd><code>plNumber</code> - player.getNumber; may or may not be current player</dd>
<dd><code>plName</code> - player.getName</dd>
<dd><code>plConn</code> - player's client connection</dd>
<dd><code>hasMonitorFromGameList</code> - if false, have not yet called
          <a href="../../soc/util/SOCGameList.html#takeMonitorForGame-java.lang.String-"><code>gameList.takeMonitorForGame(ga)</code></a>;
          if false, this method will take this monitor at its start,
          and release it before returning.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the turn was ended and game is still active;
          false if we find that all players have left and
          the gamestate has been changed here to <a href="../../soc/game/GameState.html#GAME_OVER"><code>GameState.GAME_OVER</code></a>.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.4.50</dd>
</dl>
</li>
</ul>
<a name="leaveGame-soc.game.SOCGame-soc.communication.Connection-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leaveGame</h4>
<pre>public abstract&nbsp;boolean&nbsp;leaveGame(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                                  <a href="../../soc/communication/Connection.html" title="class in soc.communication">Connection</a>&nbsp;c,
                                  boolean&nbsp;hasReplacement,
                                  boolean&nbsp;hasHumanReplacement)</pre>
<div class="block">This member (player or observer) has left the game.
 Check the game and clean up, forcing end of current turn if necessary.
 Call <a href="../../soc/game/SOCGame.html#removePlayer-java.lang.String-boolean-"><code>SOCGame.removePlayer(String, boolean)</code></a>.
 If the game still has other players, continue it, otherwise it will be ended after
 returning from <code>leaveGame</code>. Send messages out to other game members
 notifying them the player has left.
<P>
 See javadoc return value for behavior if the sole human player has left
 and only bots and/or observers remain.
<P>
 <B>Locks:</b> Has <a href="../../soc/util/SOCGameList.html#takeMonitorForGame-java.lang.String-"><code>gameList.takeMonitorForGame(gm)</code></a>
 when calling this method; does not have <a href="../../soc/game/SOCGame.html#takeMonitor--"><code>SOCGame.takeMonitor()</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ga</code> - The game</dd>
<dd><code>c</code> - The member connection which left.
           The server has already removed <code>c</code> from the list of game members.
           If <code>c</code> is being dropped because of an error,
           <a href="../../soc/communication/Connection.html#disconnect--"><code>Connection.disconnect()</code></a> has already been called.
           Don't exclude <code>c</code> from any communication about leaving the game,
           in case they are still connected and in other games.</dd>
<dd><code>hasReplacement</code> - If true the leaving connection is a bot, and there's a waiting client who will be told
           next to sit down in this bot's seat, so that isn't really becoming vacant</dd>
<dd><code>hasHumanReplacement</code> - if true, <code>hasReplacement</code>'s client is human, not a bot</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the game should be ended and deleted (does not have other observers or non-robot players,
           not <code>hasHumanReplacement</code>, and game's <code>isBotsOnly</code> flag is false).
           <P>
           If <code>isBotsOnly</code> is false, and the game is now only robots and observers,
           game should end unless the "allow robots-only games" property is nonzero: Check
           <a href="../../soc/server/genericServer/Server.html#getConfigIntProperty-java.lang.String-int-"><code>SOCServer.getConfigIntProperty</code></a>
           (<a href="../../soc/server/SOCServer.html#PROP_JSETTLERS_BOTS_BOTGAMES_TOTAL"><code>PROP_JSETTLERS_BOTS_BOTGAMES_TOTAL</code></a>, 0).</dd>
</dl>
</li>
</ul>
<a name="findRobotAskJoinGame-soc.game.SOCGame-java.lang.Object-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>findRobotAskJoinGame</h4>
<pre>public abstract&nbsp;boolean&nbsp;findRobotAskJoinGame(<a href="../../soc/game/SOCGame.html" title="class in soc.game">SOCGame</a>&nbsp;ga,
                                             java.lang.Object&nbsp;reqInfo,
                                             boolean&nbsp;gameIsActive)</pre>
<div class="block">When a human player has left an active game, or a game is starting and a
 bot from that game's <a href="../../soc/server/SOCServer.html#robotJoinRequests"><code>SOCServer.robotJoinRequests</code></a> has disconnected,
 look for a robot player which can take a seat and continue the game.
<P>
 If found the bot should be added to <a href="../../soc/server/SOCServer.html#robotJoinRequests"><code>SOCServer.robotJoinRequests</code></a> and
 should be sent a JoinGameRequest message. Otherwise the game should be sent a
 ServerText message explaining failure to find any robot; human players
 might need to leave the game and start a new one.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ga</code> - Game to look in</dd>
<dd><code>reqInfo</code> - Info related to the join request, such as the seat number to fill.
     If <code>! gameIsActive</code>, this comes from <a href="../../soc/server/SOCServer.html#robotJoinRequests"><code>SOCServer.robotJoinRequests</code></a>
     via <a href="../../soc/server/SOCServer.html#leaveConnection-soc.communication.Connection-"><code>SOCServer.leaveConnection(Connection)</code></a>.</dd>
<dd><code>gameIsActive</code> - True if for active game, not a game still starting</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if an available bot was found</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../soc/server/GameMessageHandler.html" title="interface in soc.server"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?soc/server/GameHandler.html" target="_top">Frames</a></li>
<li><a href="GameHandler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
